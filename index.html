<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MDT84GPYB3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-MDT84GPYB3');
  </script>
  <!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AogakuPay</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="index.html">
        <img class="logo-mark" src="photoes/app_icon.png" alt="青学ペイ ロゴ">
        <span class="logo-text">青学ペイ</span>
      </a>
      <nav class="global-nav" aria-label="メインナビゲーション">
        <a href="index.html" class="nav-item active">ホーム</a>
        <a href="usage.html" class="nav-item">使い方</a>
        <a href="members.html" class="nav-item">メンバー紹介</a>
      </nav>
      <button class="menu-toggle" aria-expanded="false" aria-label="メニュー">☰</button>
    </div>
  </header>

  <nav class="sub-tabs container" aria-label="サブタブ">
    <button id="subtab-app" class="subtab-btn active">アプリ紹介</button>
    <button id="subtab-json" class="subtab-btn">青祭参加団体</button>
  </nav>

  <main>
    <section id="app-section">
      <section class="hero hero--paypayish-bg">
        <div class="container hero-inner">
          <div class="hero-content">
            <h1>学生向けキャッシュレス体験を、もっと身近に</h1>
            <p class="lead">
              青学ペイは学内で使える簡単・安全な決済アプリ<br>
              のプロトタイプです。
              <br>現在の実装状況やこれからのロードマップ<br>をこちらでご紹介しています。</p>

            <div class="hero-ctas">
              <a class="btn btn-feedback" href="usage.html" target="_blank" rel="noopener noreferrer">使い方を見る</a>
              <a class="btn btn-feedback" href="#features" id="features-btn">特徴を見る</a>
            </div>
          </div>
          <div class="hero-visual" aria-hidden="true" style="align-items: flex-start;">
            <img class="hero-phone" src="assets/qr-hero.png" alt="" style="object-fit: contain; object-position: top; display: block;">
          </div>
        </div>
      </section>
      <div style="background:#d3d3d3; text-align:center; padding:32px 0 24px 0; box-shadow:0 2px 8px rgba(0,0,0,0.06); margin-bottom: 2em;">
        <div style="display:flex; align-items:center; justify-content:center; gap:24px; margin-bottom:16px;">
          <img src="photoes/app_icon.png" alt="青学ペイロゴ" style="width:56px;height:56px; border-radius:16px; box-shadow:0 2px 8px rgba(0,0,0,0.15); background:#f5f5f5;">
          <div style="font-size:1.35em; font-weight:700; color:#1b1b1f; text-align:left;">
            いますぐ<br>
            <span style="color:#316745;">青学ペイ</span>アプリをダウンロード
          </div>
        </div>
        <a href="https://testflight.apple.com/join/weuxb116" target="_blank" rel="noopener noreferrer" style="display:inline-block; background:#24292f; color:#ffff; font-weight:700; font-size:1.1em; padding:10px 28px; border-radius:10px; margin-top:8px; text-decoration:none; box-shadow:0 2px 8px rgba(0,0,0,0.12);">
          iOS版をダウンロード
        </a>
        <div style="margin-top:10px; font-size:0.98em; color:#888;">
          ※iOSのみ対応／App Storeには未公開
        </div>
      </div>

      <section class="features container" id="features">
        <h2 class="section-title">主な特徴</h2>
        <div class="cards">
          <article class="card">
            <h3>簡単な操作</h3>
            <p>QRコード読み取りやワンタップでの支払いに対応。直感的なUIで誰でも使えます。</p>
          </article>
          <article class="card">
            <h3>学内向けの設計</h3>
            <p>学生証や購買データと連携し、学内の利用に最適化された機能を提供します。</p>
          </article>
          <article class="card">
            <h3>安全性</h3>
            <p>認証・暗号化など基本的なセキュリティ設計を取り入れています（開発中）。</p>
          </article>
        </div>
      </section>

      <section class="status container">
        <h2 class="section-title">現在の開発状況</h2>
        <div class="progress-list">
          <div class="progress-item">
            <div class="progress-label">UI デザイン</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 70%;"></div>
              <div class="progress-bar-remaining" style="width: 30%;"></div>
            </div>
            <div class="progress-percent">進捗: <span class="percent-value" data-percent="70">70%</span></div>
          </div>
          <div class="progress-item">
            <div class="progress-label">QR 決済連携</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 40%;"></div>
              <div class="progress-bar-remaining" style="width: 60%;"></div>
            </div>
            <div class="progress-percent">進捗: <span class="percent-value" data-percent="40">40%</span></div>
          </div>
          <div class="progress-item">
            <div class="progress-label">ユーザーテスト</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 0%;"></div>
              <div class="progress-bar-remaining" style="width: 100%;"></div>
            </div>
            <div class="progress-percent">進捗: <span class="percent-value" data-percent="0">0%</span></div>
          </div>
          <div class="progress-item">
            <div class="progress-label">青学ペイ for Android</div>
            <div class="progress-container">
              <div class="progress-bar" style="width: 10%;"></div>
              <div class="progress-bar-remaining" style="width: 90%;"></div>
            </div>
            <div class="progress-percent">進捗: <span class="percent-value" data-percent="10">10%</span></div>
          </div>
        </div>
      </section>

      <section class="instagram-feed container">
        <h2 class="section-title">公式Instagram</h2>
        <div style="display: flex; justify-content: center;">
          <iframe src="https://snapwidget.com/embed/1106536"
                  class="snapwidget-widget"
                  allowtransparency="true"
                  frameborder="0"
                  scrolling="no"
                  style="border:none; overflow:hidden; width:1800px; height:600px"
                  title="Posts from Instagram"></iframe>
        </div>
        <div style="text-align:center; margin-top:8px;">
          <a href="https://www.instagram.com/aogaku.pay/" target="_blank" rel="noopener noreferrer">@aogaku.pay をもっと見る</a>
        </div>
      </section>
    </section>

    <section id="json-section" style="display:none;">
      <div class="container">
        <h2 class="section-title">青祭参加団体</h2>
        <pre id="json-viewer" style="background:#f5f5f5; padding:1em; border-radius:8px; overflow-x:auto;"></pre>
      </div>
    </section>
  </main>
  <footer class="site-footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <small>&copy; <span id="year"></span> Azul</small>
      </div>
      <div class="footer-center">
        <a href="https://forms.gle/uufPVv7yxR5w3acG6" style="font-size:1em; color:#3f729b; text-decoration:none;">フィードバックを送る</a>
      </div>
      <div class="footer-right">
        <a href="terms.html" style="font-size:1em; color:#3f729b; text-decoration:none;">
          利用規約・プライバシーポリシー
        </a>
      </div>
    </div>
  </footer>
  <script>
    // サブタブ切り替え
    const appTab = document.getElementById('subtab-app');
    const jsonTab = document.getElementById('subtab-json');
    const appSection = document.getElementById('app-section');
    const jsonSection = document.getElementById('json-section');
    appTab.addEventListener('click', () => {
      appTab.classList.add('active');
      jsonTab.classList.remove('active');
      appSection.style.display = '';
      jsonSection.style.display = 'none';
    });
    jsonTab.addEventListener('click', () => {
      appTab.classList.remove('active');
      jsonTab.classList.add('active');
      appSection.style.display = 'none';
      jsonSection.style.display = '';
      // JSON表示（例: aosai.json）
      fetch('aosai.json')
        .then(res => res.json())
        .then(data => {
          document.getElementById('json-viewer').textContent = JSON.stringify(data, null, 2);
        })
        .catch(() => {
          document.getElementById('json-viewer').textContent = "団体データを読み込めませんでした";
        });
    });

    // 「特徴を見る」ボタンで主な特徴へスクロール
    document.getElementById('features-btn').addEventListener('click', function(e) {
      e.preventDefault();
      document.getElementById('features').scrollIntoView({ behavior: 'smooth' });
    });

    // 既存のJS（年表示・メニュー・進捗バー色）
    document.getElementById('year').textContent = new Date().getFullYear();
    const toggle = document.querySelector('.menu-toggle');
    const nav = document.querySelector('.global-nav');
    toggle.addEventListener('click', () => {
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      nav.classList.toggle('open');
    });
    document.querySelectorAll('.percent-value').forEach(function(span) {
      const percent = parseInt(span.dataset.percent, 10);
      let color = '';
      if (percent >= 70) {
        color = getComputedStyle(document.documentElement).getPropertyValue('--primary');
      } else {
        color = getComputedStyle(document.documentElement).getPropertyValue('--accent');
      }
      span.style.color = color.trim();
      span.style.fontWeight = 'bold';
    });
  </script>
</body>
</html>
